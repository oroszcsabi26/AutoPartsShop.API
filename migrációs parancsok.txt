- dotnet ef database update 20250219112036_UpdatePasswordHashSize --project AutoPartsShop.Infrastructure --startup-project AutoPartsShop.API
- dotnet ef migrations remove --project AutoPartsShop.Infrastructure --startup-project AutoPartsShop.API
- dotnet ef migrations add AddOrderCommentColumn --project AutoPartsShop.Infrastructure --startup-project AutoPartsShop.API
- dotnet ef database update --project AutoPartsShop.Infrastructure --startup-project AutoPartsShop.API
- dotnet ef migrations list --project AutoPartsShop.Infrastructure --startup-project AutoPartsShop.API


KÃ¶vetkezÅ‘ lÃ©pÃ©s: A rendelÃ©si elÅ‘zmÃ©nyek megjelenÃ­tÃ©se a felhasznÃ¡lÃ³i fiÃ³kban
A cÃ©lunk most az, hogy a bejelentkezett felhasznÃ¡lÃ³ meg tudja tekinteni a korÃ¡bbi rendelÃ©seit. Ehhez:

LÃ©trehozunk egy Ãºj komponenst (order-history.component.ts), amely megjelenÃ­ti a rendelÃ©si elÅ‘zmÃ©nyeket.
MeghÃ­vjuk a backend API-t az adatok lekÃ©rÃ©sÃ©re.
MegjelenÃ­tjÃ¼k az egyes rendelÃ©sek rÃ©szleteit (rendelÃ©s azonosÃ­tÃ³, dÃ¡tum, Ã¡llapot, rendelt termÃ©kek).
HozzÃ¡adjuk az Ãºtvonalat az alkalmazÃ¡sba.
1. LÃ©pÃ©s: Hozzuk lÃ©tre az order-history komponenst
ğŸ“Œ TerminÃ¡l parancs:

sh
MÃ¡solÃ¡s
SzerkesztÃ©s
ng generate component components/order-history --standalone
Vagy alternatÃ­v parancs:

sh
MÃ¡solÃ¡s
SzerkesztÃ©s
ng g c components/order-history --standalone
2. LÃ©pÃ©s: ImplementÃ¡ljuk az order-history.component.ts fÃ¡jlt
Nyisd meg az order-history.component.ts fÃ¡jlt, Ã©s illeszd be az alÃ¡bbi kÃ³dot:

typescript
MÃ¡solÃ¡s
SzerkesztÃ©s
import { Component, OnInit } from '@angular/core';
import { OrderService } from '../../services/order.service';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-order-history',
  standalone: true,
  templateUrl: './order-history.component.html',
  styleUrls: ['./order-history.component.css'],
  imports: [CommonModule]
})
export class OrderHistoryComponent implements OnInit {
  orders: any[] = [];
  isLoading = true;

  constructor(private orderService: OrderService) {}

  ngOnInit(): void {
    this.loadOrders();
  }

  loadOrders(): void {
    this.orderService.getUserOrders().subscribe({
      next: (data) => {
        this.orders = data;
        this.isLoading = false;
      },
      error: (error) => {
        console.error('Hiba tÃ¶rtÃ©nt a rendelÃ©si adatok lekÃ©rÃ©sekor:', error);
        this.isLoading = false;
      }
    });
  }
}
3. LÃ©pÃ©s: ImplementÃ¡ljuk az order-history.component.html fÃ¡jlt
Nyisd meg az order-history.component.html fÃ¡jlt, Ã©s illeszd be az alÃ¡bbi kÃ³dot:

html
MÃ¡solÃ¡s
SzerkesztÃ©s
<div class="order-history-container">
  <h2>ğŸ“œ RendelÃ©si elÅ‘zmÃ©nyek</h2>

  <div *ngIf="isLoading">ğŸ”„ RendelÃ©sek betÃ¶ltÃ©se...</div>

  <div *ngIf="!isLoading && orders.length === 0">
    âŒ Nincs korÃ¡bbi rendelÃ©s.
  </div>

  <div *ngIf="orders.length > 0">
    <div *ngFor="let order of orders" class="order-card">
      <h3>ğŸ“¦ RendelÃ©s #{{ order.id }}</h3>
      <p><strong>ğŸ—“ DÃ¡tum:</strong> {{ order.orderDate | date:'yyyy-MM-dd HH:mm' }}</p>
      <p><strong>ğŸ“ SzÃ¡llÃ­tÃ¡si cÃ­m:</strong> {{ order.shippingAddress }}</p>
      <p><strong>ğŸ“œ SzÃ¡mlÃ¡zÃ¡si cÃ­m:</strong> {{ order.billingAddress }}</p>
      <p><strong>ğŸ“Œ Ãllapot:</strong> {{ order.status }}</p>

      <h4>ğŸ›’ Rendelt termÃ©kek:</h4>
      <ul>
        <li *ngFor="let item of order.orderItems">
          {{ item.name }} - {{ item.quantity }} db Ã— {{ item.price | currency:'HUF' }}
        </li>
      </ul>

      <p><strong>ğŸ’° Ã–sszesen:</strong> {{ order.orderItems.reduce((sum, item) => sum + item.price * item.quantity, 0) | currency:'HUF' }}</p>
    </div>
  </div>
</div>
4. LÃ©pÃ©s: StÃ­lusok a order-history.component.css fÃ¡jlban
Nyisd meg az order-history.component.css fÃ¡jlt, Ã©s illeszd be az alÃ¡bbi kÃ³dot:

css
MÃ¡solÃ¡s
SzerkesztÃ©s
.order-history-container {
  max-width: 800px;
  margin: 20px auto;
  padding: 20px;
  background-color: white;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  text-align: center;
}

h2 {
  color: #003366;
}

.order-card {
  padding: 15px;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 15px;
  background-color: #f9f9f9;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  text-align: left;
}

h3 {
  color: #007bff;
  margin-bottom: 5px;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  font-size: 14px;
  padding: 5px 0;
}
5. LÃ©pÃ©s: Ãšj Ãºtvonal hozzÃ¡adÃ¡sa az app.routes.ts fÃ¡jlhoz
Mivel most egy Ãºj oldalt hoztunk lÃ©tre, hozzÃ¡ kell adnunk az Ãºtvonalakhoz.

ğŸ“Œ FrissÃ­tsd az app.routes.ts fÃ¡jlt az alÃ¡bbi kÃ³ddal:

typescript
MÃ¡solÃ¡s
SzerkesztÃ©s
import { Routes } from '@angular/router';
import { OrderHistoryComponent } from './components/order-history/order-history.component';

export const routes: Routes = [
    { path: 'rendelesek', component: OrderHistoryComponent }
];
6. LÃ©pÃ©s: FrissÃ­tsÃ¼k a navigÃ¡ciÃ³s sÃ¡vot
Most hozzÃ¡adunk egy hivatkozÃ¡st a rendelÃ©si elÅ‘zmÃ©nyek oldalÃ¡ra.

ğŸ“Œ Nyisd meg az app.component.html fÃ¡jlt, Ã©s add hozzÃ¡ a kÃ¶vetkezÅ‘ sort a navigÃ¡ciÃ³s sÃ¡vba:

html
MÃ¡solÃ¡s
SzerkesztÃ©s
<a *ngIf="isAuthenticated" routerLink="/rendelesek" class="auth-link">ğŸ“œ RendelÃ©seim</a>
ğŸ“Œ Ã–sszegzÃ©s
âœ… LÃ©trehoztunk egy order-history komponenst, amely megjelenÃ­ti a felhasznÃ¡lÃ³ korÃ¡bbi rendelÃ©seit.
âœ… HozzÃ¡adtuk az API hÃ­vÃ¡st a rendelÃ©si elÅ‘zmÃ©nyek lekÃ©rÃ©sÃ©hez.
âœ… MegjelenÃ­tettÃ¼k a rendelÃ©si informÃ¡ciÃ³kat Ã©s a rendelt termÃ©keket.
âœ… FrissÃ­tettÃ¼k a navigÃ¡ciÃ³s sÃ¡vot, hogy a felhasznÃ¡lÃ³ elÃ©rhesse a rendelÃ©seit.
